<idea-plugin url="https://github.com/kornilova-l/flamegraph-visualizer">
    <id>com.github.kornilovaL.flamegraphProfiler</id>
    <name>Flamegraph Profiler</name>
    <version>0.7</version>

    <vendor url="https://github.com/kornilova-l" email="kornilova203@gmail.com"/>

    <description><![CDATA[
      Instrumentation Java Profiler & Flamegraph Visualizer<br>
      <strong>Performance Recording</strong><br>
      Plugin lets you record performance of Java program with instrumentation profiler.
<ol>
    <li>To specify methods that will be recorded open <strong>Tools | Flamegraph Profiler | Edit Configuration...</strong></li>
    <li>To run program with profiler select the desired run configuration and choose <strong>Run <name> with profiler</strong></li>
    <li>Also you can configure profiler to save value of method's parameters or it's return value. This should be done if you want to see how parameters influence method's performance. To enable this option check 'Save' checkbox beside type of parameter(s) when editing pattern in configuration.</li>
</ol>

<strong>Visualizing Results</strong><br>
You can analyze performance of your program with <strong>Flamegraph Visualizer</strong>.<br>
<strong>It supports following files:</strong>
<ol>
    <li><i>ser</i> files generated by Flamegraph Profiler</li>
    <li><i>jfr</i> files generated by Flight Recorder</li>
    <li>Yourkit <i>csv</i> files. To generate csv file from a snapshot run following script: <code>java -jar -Dexport.call.tree.cpu -Dexport.csv /lib/yjp.jar -export ~/Snapshots/.snapshot</code></li>
    <li>Files in flamegraph format</li>
</ol>
<strong>Ways to open visualizer:</strong>
<ol>
    <li>After executing program with the profiler choose <strong>Tools | Flamegraph Profiler | Open Results...</strong> to see the result.</li>
    <li>To upload your <i>.jfr</i> or <i>.ser</i> file choose <strong>Tools | Flamegraph Profiler | Upload File...</strong></li>
</ol>
Detailed description at <a href="https://github.com/kornilova-l/flamegraph-visualizer">github.com/kornilova-l/flamegraph-visualizer</a>
    ]]></description>

    <change-notes><![CDATA[
    <ul>
      <li>Show message if uploaded file already exist or is unsupported.</li>
      <li>Optimized visualization of Yourkit files.</li>
      <li>Bug fixes and minor improvements.</li>
    </ul>
    ]]>
    </change-notes>

    <idea-version since-build="162"/>

    <extensionPoints>
        <extensionPoint name="profilerToFlamegraphConverter"
                        interface="com.github.kornilova_l.flamegraph.plugin.converters.ProfilerToFlamegraphConverter"/>
        <extensionPoint name="fileToCallTracesConverter"
                        interface="com.github.kornilova_l.flamegraph.plugin.server.trees.FileToCallTracesConverter"/>
    </extensionPoints>

    <extensions defaultExtensionNs="com.intellij">
        <httpRequestHandler
                implementation="com.github.kornilova_l.flamegraph.plugin.server.ProfilerHttpRequestHandler"/>
        <executor implementation="com.github.kornilova_l.flamegraph.plugin.execution.ProfilerExecutor"/>
        <programRunner implementation="com.github.kornilova_l.flamegraph.plugin.execution.ProfilerProgramRunner"/>
    </extensions>

    <extensions defaultExtensionNs="com.github.kornilovaL.flamegraphProfiler">
        <profilerToFlamegraphConverter
                implementation="com.github.kornilova_l.flamegraph.plugin.converters.jmc.JMCConverter"/>
        <fileToCallTracesConverter
                implementation="com.github.kornilova_l.flamegraph.plugin.server.trees.converters.FlamegraphToCallTracesConverter"/>
        <fileToCallTracesConverter
                implementation="com.github.kornilova_l.flamegraph.plugin.server.trees.converters.YourkitCsvToCallTracesConverter"/>
    </extensions>

    <actions>
        <group id="com.github.kornilova_l.flamegraph" text="Flamegraph Profiler" popup="true"
               icon="ProfilerIcons.flameIcon">
            <action class="com.github.kornilova_l.flamegraph.plugin.ui.config_dialog.ShowProfilerDialogAction"
                    id="flamegraph-profiler.ShowProfilerDialog" text="Edit Configuration..."/>
            <action id="java-profiling-plugin.server"
                    class="com.github.kornilova_l.flamegraph.plugin.server.ShowLastResultAction"
                    text="Open Results..." description=""/>
            <action class="com.github.kornilova_l.flamegraph.plugin.server.ShowUploadFilePageAction"
                    id="flamegraph-profiler.ShowUploadFilePageAction" text="Upload File..."/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </group>
        <group>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <action id="flamegraph-profiler.AddMethodToConfigAction"
                    class="com.github.kornilova_l.flamegraph.plugin.ui.line_markers.add_remove_actions.AddMethodToConfigAction"
                    text="Add method to Profiler Config"/>
            <action id="flamegraph-profiler.RemoveMethodToConfigAction"
                    class="com.github.kornilova_l.flamegraph.plugin.ui.line_markers.add_remove_actions.RemoveMethodFromConfigAction"
                    text="Remove method from Profiler Config"/>
        </group>
    </actions>
    <project-components>
        <component>
            <implementation-class>com.github.kornilova_l.flamegraph.plugin.configuration.ConfigStorage
            </implementation-class>
        </component>
        <component>
            <interface-class>com.github.kornilova_l.flamegraph.plugin.ui.line_markers.LineMarkerProjectComponent
            </interface-class>
            <implementation-class>com.github.kornilova_l.flamegraph.plugin.ui.line_markers.LineMarkerProjectComponent
            </implementation-class>
        </component>
        <component>
            <interface-class>com.github.kornilova_l.flamegraph.plugin.ui.line_markers.LineMarkersHolder
            </interface-class>
            <implementation-class>com.github.kornilova_l.flamegraph.plugin.ui.line_markers.LineMarkersHolder
            </implementation-class>
        </component>
    </project-components>

</idea-plugin>