syntax = "proto3";

package com.github.kornilova_l.protos;

option java_outer_classname = "TreeProtos";

import "com/github/kornilova_l/protos/event.proto";

message Tree {
    int64 duration = 1;
    repeated Call calls = 2;
    int64 threadId = 3; // only for trees which save original call structure
    int64 startTime = 4; // only for trees which save original call structure

    message Call {
        int64 duration = 1;
        com.github.kornilova_l.protos.Event.Enter enter = 2;
        oneof exitInfo { // does not exist if JVM was stoped or if method threw exception
            com.github.kornilova_l.protos.Event.Exit exit = 3;
            com.github.kornilova_l.protos.Event.Exception exception = 4;
        }
        repeated Call calls = 5;
        int64 startTime = 6; // only for trees which save original call structure
    }
}
