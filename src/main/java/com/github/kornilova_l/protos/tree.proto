syntax = "proto3";

package com.github.kornilova_l.protos;

option java_outer_classname = "TreeProtos";

import "com/github/kornilova_l/protos/event.proto";

message Tree {
    int64 duration = 1;
    int64 startTime = 2; // only for trees which save original call structure
    int64 threadId = 3; // only for trees which save original call structure
    repeated Call calls = 4;
    uint32 depth = 5;

    message Call {
        int64 duration = 1;
        com.github.kornilova_l.protos.Event.Enter enter = 2;
        oneof exitInfo { // does not exist if JVM was stoped or if method threw exception
            com.github.kornilova_l.protos.Event.Exit exit = 3;
            com.github.kornilova_l.protos.Event.Exception exception = 4;
        }
        int64 startTime = 5; // only for trees which save original call structure
        repeated Call calls = 6;
    }
}
